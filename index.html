
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Home Loan Tracker</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Bootstrap -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

<!-- Google Font -->
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">

<!-- jQuery -->
<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>

<!-- Chart.js -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<!-- Excel -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>

<style>
:root {
  --primary:#4f46e5;
  --bg:#f8fafc;
}
body{
  font-family:Inter,sans-serif;
  background:linear-gradient(135deg,#eef2ff,#f8fafc);
}
.glass{
  background:rgba(255,255,255,.8);
  backdrop-filter:blur(15px);
  border-radius:20px;
  box-shadow:0 15px 40px rgba(0,0,0,.08);
}
.header{
  background:linear-gradient(135deg,var(--primary),#6366f1);
  color:#fff;
  padding:20px;
  border-radius:20px;
}
.summary-card{
  background:#fff;
  border-radius:18px;
  padding:15px;
  box-shadow:0 10px 25px rgba(0,0,0,.06);
}
.summary-card span{
  font-size:20px;
  font-weight:700;
}
input[type=range]{
  accent-color:var(--primary);
}
.paid-row{background:#ecfdf5!important;}
.remaining-row{background:#fff;}
.table thead{
  background:var(--primary);
  color:#fff;
}
</style>
</head>

<body>

<div class="container my-4">

<!-- HEADER -->
<div class="header text-center mb-4 glass">
  <h2 class="fw-bold mb-1">üè† Home Loan Tracker</h2>
  <small>Slide to calculate ‚Ä¢ No keyboard needed</small>
</div>

<!-- INPUT -->
<div class="glass p-4 mb-4">
<div class="row g-3">

  <div class="col-md-3">
    <label class="fw-semibold">First EMI Date</label>
    <input type="date" id="firstEmiDate" class="form-control">
  </div>

  <!-- LOAN AMOUNT -->
  <div class="col-md-3">
    <label class="fw-semibold">Loan Amount (‚Çπ)</label>
    <input type="range" id="loanRange" min="100000" max="100000000" step="100000">
    <input type="number" id="loanAmount" class="form-control mt-1">
    <small class="text-muted">‚Çπ1 Lakh ‚Äì ‚Çπ10 Crore</small>
  </div>

  <!-- TENURE -->
  <div class="col-md-3">
    <label class="fw-semibold">Tenure (Years)</label>
    <input type="range" id="tenureRange" min="1" max="30" step="1">
    <input type="number" id="tenure" class="form-control mt-1">
  </div>

  <!-- INTEREST -->
  <div class="col-md-3">
    <label class="fw-semibold">Interest %</label>
    <input type="range" id="interestRange" min="5" max="15" step="0.05">
    <input type="number" step="0.01" id="interest" class="form-control mt-1">
  </div>

</div>

<div class="row mt-3">
  <div class="col-md-4 mx-auto d-grid">
    <button id="calculate" class="btn btn-primary btn-lg">Calculate EMI</button>
  </div>
</div>
</div>

<!-- RESULT -->
<div id="result" style="display:none">

<div class="row text-center mb-3">
  <div class="col-md-3 col-6">
    <div class="summary-card">
      <small>Total Paid</small><br>‚Çπ <span id="totalPaid"></span>
    </div>
  </div>
  <div class="col-md-3 col-6">
    <div class="summary-card">
      <small>Remaining</small><br>‚Çπ <span id="remainingLoan"></span>
    </div>
  </div>
  <div class="col-md-3 col-6 mt-2 mt-md-0">
    <div class="summary-card">
      <small>Monthly EMI</small><br>‚Çπ <span id="emiAmount"></span>
    </div>
  </div>
  <div class="col-md-3 col-6 mt-2 mt-md-0">
    <div class="summary-card border border-success">
      <small>Total Payable</small><br>‚Çπ <span id="totalPayable"></span>
    </div>
  </div>
</div>

<div class="glass p-3 mb-4">
  <div class="table-responsive">
    <table class="table table-bordered table-sm">
      <thead>
        <tr>
          <th>EMI Date</th>
          <th>Principal</th>
          <th>Interest</th>
          <th>EMI</th>
          <th>Balance</th>
        </tr>
      </thead>
      <tbody id="emiTable"></tbody>
    </table>
  </div>
</div>

<div class="glass p-3">
  <canvas id="emiChart"></canvas>
</div>

</div>
</div>

<script>
let chart;

// Sync sliders with inputs
$("#loanRange").on("input",()=>$("#loanAmount").val($("#loanRange").val()));
$("#loanAmount").on("input",()=>$("#loanRange").val($("#loanAmount").val()));

$("#tenureRange").on("input",()=>$("#tenure").val($("#tenureRange").val()));
$("#tenure").on("input",()=>$("#tenureRange").val($("#tenure").val()));

$("#interestRange").on("input",()=>$("#interest").val($("#interestRange").val()));
$("#interest").on("input",()=>$("#interestRange").val($("#interest").val()));

// Default values
$("#loanRange").val(2000000).trigger("input");
$("#tenureRange").val(20).trigger("input");
$("#interestRange").val(8.5).trigger("input");

$("#calculate").click(function(){

let firstEmiDate=new Date($("#firstEmiDate").val());
let loan=+$("#loanAmount").val();
let tenure=+$("#tenure").val();
let interest=+$("#interest").val();

if(!$("#firstEmiDate").val()){alert("Select First EMI Date");return;}

let months=tenure*12;
let rate=interest/12/100;
let emi=Math.round(loan*rate*Math.pow(1+rate,months)/(Math.pow(1+rate,months)-1));
let totalPayable=emi*months;

let balance=loan,totalPaid=0,remaining=loan;
let today=new Date();
$("#emiTable").html("");

let labels=[],p=[],i=[],b=[];

for(let x=0;x<months;x++){
  let d=new Date(firstEmiDate);d.setMonth(d.getMonth()+x);
  let int=Math.round(balance*rate);
  let pri=emi-int;
  balance-=pri;if(balance<0)balance=0;
  if(d<=today){totalPaid+=emi;remaining=balance;}
  $("#emiTable").append(`
    <tr class="${d<=today?'paid-row':'remaining-row'}">
      <td>${d.toLocaleDateString("en-IN")}</td>
      <td>${pri.toLocaleString()}</td>
      <td>${int.toLocaleString()}</td>
      <td>${emi.toLocaleString()}</td>
      <td>${Math.round(balance).toLocaleString()}</td>
    </tr>
  `);
  labels.push(d.toLocaleDateString("en-IN"));
  p.push(pri);i.push(int);b.push(balance);
}

$("#emiAmount").text(emi.toLocaleString());
$("#totalPaid").text(totalPaid.toLocaleString());
$("#remainingLoan").text(Math.round(remaining).toLocaleString());
$("#totalPayable").text(totalPayable.toLocaleString());

$("#result").fadeIn();

if(chart)chart.destroy();
chart=new Chart(document.getElementById("emiChart"),{
  type:"line",
  data:{labels,datasets:[
    {label:"Principal",data:p},
    {label:"Interest",data:i},
    {label:"Balance",data:b}
  ]}
});
});
</script>

</body>
</html>
