
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Home Loan Tracker</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Bootstrap -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

<!-- Google Font -->
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">

<!-- jQuery -->
<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>

<!-- Chart.js -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<!-- Excel -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>

<style>
:root {
  --primary: #4f46e5;
  --secondary: #22c55e;
  --dark: #0f172a;
  --light: #f8fafc;
}

body {
  font-family: 'Inter', sans-serif;
  background: linear-gradient(135deg,#eef2ff,#f8fafc);
  color: var(--dark);
}

.glass {
  background: rgba(255,255,255,0.75);
  backdrop-filter: blur(15px);
  border-radius: 20px;
  box-shadow: 0 15px 40px rgba(0,0,0,0.08);
}

.header {
  background: linear-gradient(135deg,var(--primary),#6366f1);
  color: #fff;
  border-radius: 20px;
  padding: 20px;
}

.btn-primary {
  background: linear-gradient(135deg,var(--primary),#6366f1);
  border: none;
  border-radius: 12px;
}

.btn-success {
  background: linear-gradient(135deg,#16a34a,#22c55e);
  border: none;
  border-radius: 12px;
}

.btn-dark {
  border-radius: 12px;
}

.summary-card {
  border-radius: 18px;
  padding: 15px;
  background: #fff;
  box-shadow: 0 10px 25px rgba(0,0,0,0.06);
}

.summary-card span {
  font-size: 20px;
  font-weight: 700;
}

.paid-row {
  background: #ecfdf5!important;
}

.remaining-row {
  background: #ffffff;
}

.table {
  border-radius: 15px;
  overflow: hidden;
}

.table thead {
  background: var(--primary);
  color: white;
}

.table tbody tr:hover {
  background: #f1f5f9;
  transition: 0.3s;
}

canvas {
  max-height: 320px;
}

@media(max-width:768px){
  .summary-card {
    margin-bottom: 10px;
  }
}
</style>
</head>

<body>

<div class="container my-4">

  <!-- HEADER -->
  <div class="header text-center mb-4 glass">
    <h2 class="fw-bold mb-1">üè† Home Loan Tracker</h2>
    <p class="mb-0 opacity-75">Smart EMI insights ‚Ä¢ Bank-accurate</p>
  </div>

  <!-- INPUT -->
  <div class="glass p-4 mb-4  border border-success ">
    <div class="row g-3">
      <div class="col-md-3">
        <label class="fw-semibold">First EMI Date</label>
        <input type="date" id="firstEmiDate" class="form-control">
      </div>
      <div class="col-md-2">
        <label class="fw-semibold">Tenure (Years)</label>
        <input type="number" id="tenure" class="form-control">
      </div>
      <div class="col-md-3">
        <label class="fw-semibold">Loan Amount (‚Çπ)</label>
        <input type="number" id="loanAmount" class="form-control">
      </div>
      <div class="col-md-2">
        <label class="fw-semibold">Interest %</label>
        <input type="number" step="0.01" id="interest" class="form-control">
      </div>
      <div class="col-md-2 d-grid">
        <label>&nbsp;</label>
        <button id="calculate" class="btn btn-primary">Calculate</button>
      </div>
    </div>
  </div>

  <!-- RESULT -->
  <div id="result" style="display:none">

    <!-- SUMMARY -->
    <div class="row text-center mb-3">
      <div class="col-md-3 col-6">
        <div class="summary-card   border border-success  ">
          <small>Total Paid</small><br>
          ‚Çπ <span id="totalPaid"></span>
        </div>
      </div>
      <div class="col-md-3 col-6">
        <div class="summary-card  border border-success ">
          <small>Remaining</small><br>
          ‚Çπ <span id="remainingLoan"></span>
        </div>
      </div>
      <div class="col-md-3 col-6 mt-2 mt-md-0">
        <div class="summary-card border border-success  ">
          <small>Monthly EMI</small><br>
          ‚Çπ <span id="emiAmount"></span>
        </div>
      </div>
      <div class="col-md-3 col-6 mt-2 mt-md-0">
        <div class="summary-card border border-success">
          <small>Total Payable</small><br>
          ‚Çπ <span id="totalPayable"></span>
        </div>
      </div>
    </div>

    <!-- ACTIONS -->
    <div class="row mb-3">
      <div class="col-6 d-grid">
        <button class="btn btn-success" onclick="exportExcel()">Export Excel</button>
      </div>
      <div class="col-6 d-grid">
        <button class="btn btn-dark" onclick="scrollToChart()">View Chart</button>
      </div>
    </div>

    <!-- TABLE -->
    <div class="glass p-3 mb-4">
      <div class="table-responsive  border border-success ">
        <table class="table table-bordered table-sm">
          <thead>
            <tr>
              <th>EMI Date</th>
              <th>Principal</th>
              <th>Interest</th>
              <th>EMI</th>
              <th>Balance</th>
            </tr>
          </thead>
          <tbody id="emiTable"></tbody>
        </table>
      </div>
    </div>

    <!-- CHART -->
    <div class="glass p-3" id="chartSection">
      <canvas id="emiChart"></canvas>
    </div>

  </div>
</div>

<script>
let chart;

$("#calculate").click(function(){
  let firstEmiDateVal=$("#firstEmiDate").val();
  let tenure=+$("#tenure").val();
  let loan=+$("#loanAmount").val();
  let interest=+$("#interest").val();

  if(!firstEmiDateVal||!tenure||!loan||!interest){
    alert("Fill all fields");return;
  }

  let firstEmiDate=new Date(firstEmiDateVal);
  let months=tenure*12;
  let rate=interest/12/100;
  let emi=Math.round(loan*rate*Math.pow(1+rate,months)/(Math.pow(1+rate,months)-1));
  let totalPayable=emi*months;

  let balance=loan,totalPaid=0,remaining=loan;
  let today=new Date();

  let labels=[],p=[],i=[],b=[];
  $("#emiTable").html("");

  for(let x=0;x<months;x++){
    let emiDate=new Date(firstEmiDate);
    emiDate.setMonth(firstEmiDate.getMonth()+x);

    let interestPart=Math.round(balance*rate);
    let principalPart=emi-interestPart;
    balance-=principalPart;if(balance<0)balance=0;

    let paid=emiDate<=today;
    if(paid){totalPaid+=emi;remaining=balance;}

    let rowClass=paid?"paid-row":"remaining-row";

    labels.push(emiDate.toLocaleDateString("en-IN"));
    p.push(principalPart);i.push(interestPart);b.push(balance);

    $("#emiTable").append(`
      <tr class="${rowClass}">
        <td>${emiDate.toLocaleDateString("en-IN")}</td>
        <td>${principalPart.toLocaleString()}</td>
        <td>${interestPart.toLocaleString()}</td>
        <td>${emi.toLocaleString()}</td>
        <td>${Math.round(balance).toLocaleString()}</td>
      </tr>
    `);
  }

  $("#emiAmount").text(emi.toLocaleString());
  $("#totalPaid").text(totalPaid.toLocaleString());
  $("#remainingLoan").text(Math.round(remaining).toLocaleString());
  $("#totalPayable").text(totalPayable.toLocaleString());

  $("#result").fadeIn();
  renderChart(labels,p,i,b);
});

function renderChart(l,p,i,b){
  if(chart)chart.destroy();
  chart=new Chart(document.getElementById("emiChart"),{
    type:"line",
    data:{labels:l,datasets:[
      {label:"Principal",data:p},
      {label:"Interest",data:i},
      {label:"Balance",data:b}
    ]},
    options:{responsive:true}
  });
}

function exportExcel(){
  let wb=XLSX.utils.table_to_book(document.querySelector("table"));
  XLSX.writeFile(wb,"Home_Loan_EMI.xlsx");
}
function scrollToChart(){
  $('html,body').animate({scrollTop:$("#chartSection").offset().top},500);
}
</script>

</body>
</html>
