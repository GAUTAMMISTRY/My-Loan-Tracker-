<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Smart Home Loan Tracker</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Bootstrap -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

<!-- Google Font -->
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">

<!-- jQuery -->
<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>

<!-- Chart.js -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<!-- Swiper -->
<link href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>

<style>
body{
  font-family:'Inter',sans-serif;
  background:linear-gradient(135deg,#eef2ff,#f8fafc);
}
.glass{
  background:rgba(255,255,255,.8);
  backdrop-filter:blur(14px);
  border-radius:18px;
  box-shadow:0 15px 40px rgba(0,0,0,.08);
}
.header{
  background:linear-gradient(135deg,#4f46e5,#6366f1);
  color:#fff;
  border-radius:18px;
  padding:20px;
}
.btn-main{
  background:linear-gradient(135deg,#4f46e5,#6366f1);
  border:none;
  color:#fff;
  border-radius:14px;
  font-weight:600;
  padding:12px;
}
.btn-prepay{
  background:linear-gradient(135deg,#16a34a,#22c55e);
  border:none;
  color:#fff;
  border-radius:14px;
  font-weight:600;
  padding:12px;
}
.summary{
  background:#fff;
  border-radius:14px;
  padding:15px;
  text-align:center;
  box-shadow:0 10px 25px rgba(0,0,0,.06);
}
.summary span{
  font-weight:700;
  font-size:18px;
}
canvas{max-height:280px;}
.swiper{padding-bottom:30px;}
.swiper-pagination-bullet-active{background:#4f46e5;}
</style>
</head>

<body>

<div class="container my-4">

<div class="header text-center mb-4">
  <h3>üè† Smart Home Loan Tracker</h3>
  <small>Swipe charts ‚Ä¢ Prepayment impact ‚Ä¢ Animated insights</small>
</div>

<!-- INPUT -->
<div class="glass p-4 mb-4">
  <div class="row g-3">
    <div class="col-md-3">
      <label>First EMI Date</label>
      <input type="date" id="emiDate" class="form-control">
    </div>
    <div class="col-md-2">
      <label>Tenure (Years)</label>
      <input type="number" id="tenure" class="form-control">
    </div>
    <div class="col-md-3">
      <label>Loan Amount ‚Çπ</label>
      <input type="number" id="loan" class="form-control">
    </div>
    <div class="col-md-2">
      <label>Interest %</label>
      <input type="number" step="0.01" id="rate" class="form-control">
    </div>
    <div class="col-md-2 d-grid">
      <label>&nbsp;</label>
      <button class="btn btn-main" id="calc">Calculate</button>
    </div>
  </div>
</div>

<!-- SUMMARY -->
<div id="result" style="display:none">
<div class="row g-2 mb-3">
  <div class="col-6 col-md-3"><div class="summary">EMI<br>‚Çπ <span id="emi"></span></div></div>
  <div class="col-6 col-md-3"><div class="summary">Total Paid<br>‚Çπ <span id="paid"></span></div></div>
  <div class="col-6 col-md-3"><div class="summary">Remaining<br>‚Çπ <span id="remain"></span></div></div>
  <div class="col-6 col-md-3"><div class="summary">Interest<br>‚Çπ <span id="interestTotal"></span></div></div>
</div>

<!-- PREPAYMENT -->
<div class="glass p-3 mb-4">
  <h6>üßÆ Prepayment / Part-Payment</h6>
  <div class="row g-2 align-items-end">
    <div class="col-md-4">
      <input type="number" id="prepay" class="form-control" placeholder="Enter prepayment amount ‚Çπ">
    </div>
    <div class="col-md-2 d-grid">
      <button class="btn btn-prepay" id="applyPrepay">Apply</button>
    </div>
    <div class="col-md-6">
      <small>
        Interest Saved: ‚Çπ <b id="saved">0</b> |
        New Balance: ‚Çπ <b id="newBalance">0</b>
      </small>
    </div>
  </div>
</div>

<!-- SWIPEABLE CHARTS -->
<div class="glass p-3">
<div class="swiper">
<div class="swiper-wrapper">

<div class="swiper-slide">
  <canvas id="lineChart"></canvas>
</div>

<div class="swiper-slide">
  <canvas id="donutChart"></canvas>
</div>

<div class="swiper-slide">
  <canvas id="progressChart"></canvas>
</div>

</div>
<div class="swiper-pagination"></div>
</div>
</div>

</div>

<script>
let lineChart, donutChart, progressChart;
let balanceGlobal, totalInterestGlobal;

$("#calc").click(function(){
  let loan=+$("#loan").val();
  let rate=+$("#rate").val()/12/100;
  let months=+$("#tenure").val()*12;

  let emi=Math.round(loan*rate*Math.pow(1+rate,months)/(Math.pow(1+rate,months)-1));
  let balance=loan, paid=0, interestTotal=0;

  let labels=[], bal=[], paidArr=[];

  for(let i=1;i<=months;i++){
    let interest=balance*rate;
    let principal=emi-interest;
    balance-=principal;
    paid+=emi;
    interestTotal+=interest;

    labels.push("M"+i);
    bal.push(balance<0?0:balance);
    paidArr.push(paid);
  }

  balanceGlobal=balance;
  totalInterestGlobal=interestTotal;

  $("#emi").text(emi.toLocaleString());
  $("#paid").text(paid.toLocaleString());
  $("#remain").text(Math.round(balance).toLocaleString());
  $("#interestTotal").text(Math.round(interestTotal).toLocaleString());

  $("#result").fadeIn();

  renderCharts(labels, bal, paidArr, loan, interestTotal);
});

function renderCharts(l,b,p,loan,intt){
  if(lineChart)lineChart.destroy();
  lineChart=new Chart(lineChartEl(),{
    type:'line',
    data:{labels:l,datasets:[
      {label:'Balance',data:b,fill:true},
    ]},
    options:{animation:{duration:1200}}
  });

  if(donutChart)donutChart.destroy();
  donutChart=new Chart(donutChartEl(),{
    type:'doughnut',
    data:{labels:['Principal','Interest'],
    datasets:[{data:[loan,intt]}]},
    options:{animation:{animateRotate:true}}
  });

  if(progressChart)progressChart.destroy();
  progressChart=new Chart(progressChartEl(),{
    type:'line',
    data:{labels:l,datasets:[
      {label:'Paid',data:p,fill:true}
    ]},
    options:{animation:{duration:1200}}
  });

  new Swiper('.swiper',{
    pagination:{el:'.swiper-pagination'},
    spaceBetween:20
  });
}

function lineChartEl(){return document.getElementById("lineChart");}
function donutChartEl(){return document.getElementById("donutChart");}
function progressChartEl(){return document.getElementById("progressChart");}

$("#applyPrepay").click(function(){
  let pre=+$("#prepay").val();
  if(!pre || pre<=0)return;

  let newBal=balanceGlobal-pre;
  if(newBal<0)newBal=0;

  let saved=totalInterestGlobal*(pre/(pre+newBal));

  $("#saved").text(Math.round(saved).toLocaleString());
  $("#newBalance").text(Math.round(newBal).toLocaleString());
});
</script>

</body>
</html>
